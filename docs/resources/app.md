---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "dsm_app Resource - terraform-provider-dsm"
subcategory: ""
description: |-
  Creates a new DSM App of type API key.The returned resource object contains the UUID of the app for further references.
  This resource can also rotate/regenerate an API key. Default permissions of any group can be modified.
---

# dsm_app (Resource)

Creates a new DSM App of type API key.The returned resource object contains the UUID of the app for further references.
This resource can also rotate/regenerate an API key. Default permissions of any group can be modified.

## Example Usage

```terraform
// Create three normal groups
resource "dsm_group" "group1" {
  name = "group1"
  description = "group1"
}

resource "dsm_group" "group2" {
  name = "group2"
  description = "group2"
}

resource "dsm_group" "group3" {
  name = "group3"
  description = "group3"
}

// Create an app
resource "dsm_app" "app" {
  name = "app"
  default_group = dsm_group.group1.id
  other_group = [dsm_group.group2.id, dsm_group.group3.id]
  other_group_permissions = local.other_groups
}


/*
To modify the default group permissions, other_group_permissions can be used in a zipmap.
In the above app the following permissions are assigned for each group:
group1: SIGN,VERIFY,ENCRYPT,WRAPKEY,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT
group2: SIGN,VERIFY,DECRYPT,WRAPKEY,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT
group3: SIGN,VERIFY,ENCRYPT,DECRYPT,WRAPKEY,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT

For group3, default permissions are assigned as it was not specified in the other_group_permissions.
group should be specified only if default permissions need to be changed.
*/

locals {
  other_groups = zipmap(
    [
      dsm_group.group1.id,
      dsm_group.group2.id
    ],
    [
      "SIGN,VERIFY,ENCRYPT,DECRYPT,WRAPKEY,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT",
      "SIGN,VERIFY,DECRYPT,WRAPKEY,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT"
    ]
  )
}

// An example on how to modify the existing permissions of a group in app
resource "dsm_app" "app" {
  name = "app"
  default_group = dsm_group.group1.id
  other_group = [dsm_group.group2.id, dsm_group.group3.id]
  other_group_permissions = local.other_groups
  mod_group_permissions = local.mod_groups
}

// group1 and group2 permissions modification
locals {
mod_groups = zipmap(
[
dsm_group.group1.id,
dsm_group.group2.id
],
[
"SIGN,VERIFY,ENCRYPT,DECRYPT,WRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT",
"SIGN,VERIFY,DECRYPT,UNWRAPKEY,DERIVEKEY,MACGENERATE,MACVERIFY,EXPORT,MANAGE,AGREEKEY,AUDIT"
]
)
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `default_group` (String) The Fortanix DSM group object id to be mapped to the app by default.
- `name` (String) The Fortanix DSM App name.

### Optional

- `description` (String) The description of the app.
- `mod_group_permissions` (Map of String) To modify the permissions of any existing group that includes default group. Please refer the example.
- `new_credential` (Boolean) Set this if you want to rotate/regenerate the API key. The values can be set as true/false.
- `other_group` (List of String) The Fortanix DSM group object id the app needs to be assigned to. If you want to delete the existing groups from an app, remove the ids during update.
- `other_group_permissions` (Map of String) Incase if you want to change the default permissions of a new group that includes default group. Please refer the example.

### Read-Only

- `acct_id` (String) The account ID from Fortanix DSM.
- `app_id` (String) The unique ID of the app from Terraform.
- `creator` (Map of String) The creator of the app from Fortanix DSM.
   * `user`: If the app was created by a user, the computed value will be the matching user id.
   * `app`: If the app was created by a app, the computed value will be the matching app id.
- `credential` (String, Sensitive) The Fortanix DSM App API key.
- `id` (String) The ID of this resource.
