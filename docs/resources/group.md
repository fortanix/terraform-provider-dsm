---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "dsm_group Resource - terraform-provider-dsm"
subcategory: ""
description: |-
  Creates a new DSM group. Such groups are act as containers for security objects, like keys or secrets. The returned resource object contains the UUID of the group for further references.
  Besides creating regular DSM groups, this resource may also be used to create DSM groups that are mapped to external resources, e.g. like an Azure Key Vault, an AWS KMS, a GCP Key Ring or a legacy HSM.
---

# dsm_group (Resource)

Creates a new DSM group. Such groups are act as containers for security objects, like keys or secrets. The returned resource object contains the UUID of the group for further references.
Besides creating regular DSM groups, this resource may also be used to create DSM groups that are mapped to external resources, e.g. like an Azure Key Vault, an AWS KMS, a GCP Key Ring or a legacy HSM.

## Example Usage

```terraform
# Create a normal group
resource "dsm_group" "group" {
  name = "group"
}


# Create a group with multiple parameters.
# The following resource group is an example of an external KMS group of Azure key vault
# and an approval policy which is configured with two users.

# For more examples of external KMS groups please refer Guides/create_BYOK_groups
resource "dsm_group" "group" {
  name        = "group"
  description = "group description"
  approval_policy = jsonencode({
    protect_permissions = [
      "ROTATE_SOBJECTS", "REVOKE_SOBJECTS", "REVERT_SOBJECTS", "DELETE_KEY_MATERIAL", "DELETE_SOBJECTS",
      "DESTROY_SOBJECTS", "MOVE_SOBJECTS", "CREATE_SOBJECTS", "UPDATE_SOBJECTS_PROFILE", "UPDATE_SOBJECTS_ENABLED_STATE",
      "UPDATE_SOBJECT_POLICIES", "ACTIVATE_SOBJECTS", "UPDATE_KEY_OPS"
    ]
    protect_crypto_operations = true
    quorum = {
      n = 1, # This defines that `n` member of approvals required.
      members = [
        {
          quorum = {
            n = 1 # This defines that `n` member of approvals required.
            members = [
              {
                user = "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
              },
              {
                user = "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
              }
            ]
            require_2fa      = false,
            require_password = false
          }
        },
        {
          quorum = {
            n = 1 # This defines that `n` member of approvals required.
            members = [
              {
                user = "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
              }
            ]
            require_2fa      = false,
            require_password = false
          }
        }
      ]
    }
  })
  hmg = jsonencode({
    url = "https://sampleakv.vault.azure.net/"
    tls = {
      mode = "required"
      validate_hostname : false
      ca = {
        ca_set = "global_roots"
      }
    }
    kind            = "AZUREKEYVAULT"
    secret_key      = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
    tenant_id       = "0XXXXXXX-YYYY-HHHH-GGGG-123456789123"
    client_id       = "0XXXXXXX-YYYY-HHHH-GGGG-123456789123"
    subscription_id = "0XXXXXXX-YYYY-HHHH-GGGG-123456789123"
    key_vault_type  = "STANDARD"
  })
}


# Create a group with basic approval_policy
# The following resource group is an example of approval policy which has configured with a single user.
resource "dsm_group" "group" {
  name        = "group"
  description = "group description"
  approval_policy = jsonencode({
    protect_permissions = [
      "ROTATE_SOBJECTS", "REVOKE_SOBJECTS", "REVERT_SOBJECTS", "DELETE_KEY_MATERIAL", "DELETE_SOBJECTS",
      "DESTROY_SOBJECTS", "MOVE_SOBJECTS", "CREATE_SOBJECTS", "UPDATE_SOBJECTS_PROFILE", "UPDATE_SOBJECTS_ENABLED_STATE",
      "UPDATE_SOBJECT_POLICIES", "ACTIVATE_SOBJECTS", "UPDATE_KEY_OPS"
    ]
    protect_crypto_operations = true
    quorum = {
      n = 1 # This defines that `n` member of approvals required.
      members = [
        {
          user = "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
        }
      ]
      require_password = false
      require_2fa      = false
    }
  })
}


# Create a normal group with key undo policy
resource "dsm_group" "group" {
  name                        = "group"
  key_undo_policy_window_time = 9000
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The Fortanix DSM group object name.

### Optional

- `approval_policy` (String) The Fortanix DSM group object quorum approval policy definition as a JSON string.
- `description` (String) The Fortanix DSM group object description.
- `hmg` (String, Sensitive) The Fortanix DSM group object HMS/KMS definition as a JSON string. It is only required, if group is pointing to an external KMS or HSM. For more examples refer Guides/create_BYOK_groups
- `key_undo_policy_window_time` (Number) The Fortanix DSM group object key undo policy window time as an Integer(Number of seconds).Key undo policy is not applicable for External KMS groups.

### Read-Only

- `acct_id` (String) Account ID from Fortanix DSM.
- `creator` (Map of String) Creator of the group object from Fortanix DSM.
- `group_id` (String) Group object ID from Fortanix DSM.
- `hmg_id` (String) HSM/KMS ID from Fortanix/DSM.
- `id` (String) The ID of this resource.
